// Mode Classique - 10 questions sans limite de temps
let currentQuestion = 0;
let score = 0;
let shuffledQuestions = [];

// Initialisation du jeu
function initGame() {
    shuffledQuestions = shuffleArray(questions).slice(0, 10);
    loadQuestion();
}

function loadQuestion() {
    if (currentQuestion >= 10) {
        endGame();
        return;
    }

    const question = shuffledQuestions[currentQuestion];
    
    document.getElementById('questionText').textContent = question.question;
    document.getElementById('score').textContent = `Score: ${score}`;
    document.getElementById('questionNumber').textContent = `Question ${currentQuestion + 1}/10`;
    
    const progress = ((currentQuestion + 1) / 10) * 100;
    document.getElementById('progressBar').style.width = progress + '%';

    const answersContainer = document.getElementById('answersContainer');
    answersContainer.innerHTML = '';

    question.answers.forEach((answer, index) => {
        const btn = document.createElement('button');
        btn.className = 'answer-btn';
        btn.textContent = answer;
        btn.onclick = () => checkAnswer(index, question.correct);
        answersContainer.appendChild(btn);
    });
}

function checkAnswer(selected, correct) {
    const buttons = document.querySelectorAll('.answer-btn');
    buttons.forEach(btn => btn.disabled = true);

    if (selected === correct) {
        buttons[correct].classList.add('correct');
        score += 10;
        setTimeout(() => {
            currentQuestion++;
            loadQuestion();
        }, 1000);
    } else {
        buttons[selected].classList.add('incorrect');
        buttons[correct].classList.add('correct');
        
        setTimeout(() => {
            currentQuestion++;
            loadQuestion();
        }, 1500);
    }
}

function endGame() {
    document.getElementById('quiz').style.display = 'none';
    document.getElementById('result').style.display = 'block';

    document.getElementById('finalScore').textContent = `${score}/100`;
    
    let message = '';
    if (score >= 80) {
        message = 'ğŸŒŸ Excellent ! Vous Ãªtes un expert !';
    } else if (score >= 60) {
        message = 'ğŸ‘ TrÃ¨s bien jouÃ© !';
    } else if (score >= 40) {
        message = 'ğŸ˜Š Pas mal, continuez Ã  vous entraÃ®ner !';
    } else {
        message = 'ğŸ’ª Ne vous dÃ©couragez pas, rÃ©essayez !';
    }
    
    document.getElementById('resultMessage').textContent = message;
}

// DÃ©marrage automatique du jeu au chargement de la page
window.onload = initGame;